---
title: "Tha Song Yang"
output:
  rmarkdown::html_document:
    fig_width: 10
vignette: >
  %\VignetteIndexEntry{Tha Song Yang}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
# library(GeoMalaria)
library(dplyr)
library(sf)
library(ggplot2)
library(ggmap)
library(rgee)
library(reticulate)
# use_python("/Users/wu.l/miniforge3/bin/python")
use_condaenv("geomalaria")

register_google(Sys.getenv("MAPS_API_KEY"))
```

Investigate the geography of Tha Song Yang

```{r}
adm0 = st_read("https://github.com/wmgeolab/geoBoundaries/raw/df46a8320bb2f703640664510273bec2be88b180/releaseData/gbOpen/THA/ADM0/geoBoundaries-THA-ADM0_simplified.geojson")
adm1 = st_read("https://github.com/wmgeolab/geoBoundaries/raw/eb8c046c824d34547fbe9a50b7308b443e76c106/releaseData/gbOpen/THA/ADM1/geoBoundaries-THA-ADM1_simplified.geojson")
adm2 = st_read("https://github.com/wmgeolab/geoBoundaries/raw/922e33de54786eed936fc13b7b3fd28c50189d5b/releaseData/gbOpen/THA/ADM2/geoBoundaries-THA-ADM2_simplified.geojson")

thailand = adm0
tak = adm1[adm1$shapeName == "Tak Province",]
tsy = adm2[adm2$shapeName == "Tha Song Yang",]
tsy_bbox = st_bbox(tsy)

ggplot() +
  geom_sf(data = thailand) +
  geom_sf(data = tak) +
  geom_sf(data = tsy) +
  theme_minimal()
```


```{r}
# treecover = st_read("https://storage.googleapis.com/earthenginepartners-hansen/GFC-2021-v1.9/Hansen_GFC-2021-v1.9_treecover2000_20N_100E.tif")
ee_Initialize
db = "JAXA/ALOS/PALSAR/YEARLY/FNF4"
image = ee$Im

```

```{r}
library(terra)
data = rast("~/Downloads/MOD13Q1.A2022305.h09v04.006.2022322132627.hdf")
plot(data$`"250m 16 days NDVI"`)

library(ncdf4)
nc = nc_open("~/Downloads/MOD13Q1.A2022305.h09v04.006.2022322132627.hdf")

library(hdf5r)
hdf5 = h5file("~/Downloads/MOD13Q1.A2022305.h09v04.006.2022322132627.hdf", "r")
```

```{python}
import pandas
import ee
ee.Authenticate()
ee.Initialize()

dataset = ee.ImageCollection("MODIS/061/MOD13Q1").filter(ee.Filter.date('2018-01-01', '2018-05-01'))
ndvi = dataset.select("NDVI")
geometry = ee.Geometry.Rectangle(r.tsy_bbox)
project = ndvi.projection().getInfo()
```
